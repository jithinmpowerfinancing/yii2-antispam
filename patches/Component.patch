--- vendor/cleantalk/yii2-antispam/Component.php	2015-06-30 23:24:52
+++ orignial_patch/Component.php	2024-08-05 22:23:33
@@ -1,8 +1,9 @@
 <?php
 namespace cleantalk\antispam;
 
-use Cleantalk;
-use CleantalkRequest;
+use Cleantalk\Cleantalk;
+use Cleantalk\CleantalkRequest;
+use Cleantalk\CleantalkResponse;
 use InvalidArgumentException;
 use Yii;
 use yii\base\Component as BaseComponent;
\ No newline at end of file
@@ -27,9 +28,12 @@
     public $apiKey;
 
     /** @var string API URL */
-    public $apiUrl = 'http://moderate.cleantalk.ru';
+    public $apiUrl = 'http://moderate.cleantalk.org';
 
-    /** @var string API response lang en|ru */
+    /**
+     * @deprecated Use setting in https://cleantalk.org/my/service?action=edit
+     * @var string API response lang en|ru
+     */
     public $responseLang;
 
     /** @var bool enable logging */
\ No newline at end of file
@@ -45,9 +49,6 @@
         if (is_null($this->apiKey)) {
             throw new InvalidConfigException('CleanTalkApi configuration must have "apiKey" value');
         }
-        if (is_null($this->responseLang)) {
-            $this->responseLang = isset(Yii::$app->language) ? substr(Yii::$app->language, 0, 2) : 'en';
-        }
     }
 
     /**
\ No newline at end of file
@@ -108,6 +109,7 @@
     /**
      * Get form submit time in seconds
      * @param string $id form id
+     * @param boolean $clear clear value in session
      * @return int|null
      */
     public function calcFormSubmitTime($id = null, $clear = true)
\ No newline at end of file
@@ -133,13 +135,12 @@
 
     /**
      * Create request for CleanTalk API.
-     * @return \CleantalkRequest
+     * @return CleantalkRequest
      */
     protected function createRequest()
     {
         $ctRequest = new CleantalkRequest();
         $ctRequest->auth_key = $this->apiKey;
-        $ctRequest->response_lang = $this->responseLang;
         $ctRequest->agent = self::AGENT_VERSION;
         $ctRequest->sender_ip = Yii::$app->request->getUserIP();
         $ctRequest->submit_time = $this->calcFormSubmitTime();
\ No newline at end of file
@@ -149,16 +150,15 @@
             [
                 'REFFERRER' => Yii::$app->request->getReferrer(),
                 'USER_AGENT' => Yii::$app->request->getUserAgent(),
-                'cms_lang' => $this->responseLang,
             ]
         );
         return $ctRequest;
     }
 
     /**
-     * @param \CleantalkRequest $request
+     * @param CleantalkRequest $request
      * @param string $method
-     * @return \CleantalkResponse CleanTalk API call result
+     * @return CleantalkResponse CleanTalk API call result
      * @throws InvalidArgumentException
      */
     protected function sendRequest($request, $method)
\ No newline at end of file
